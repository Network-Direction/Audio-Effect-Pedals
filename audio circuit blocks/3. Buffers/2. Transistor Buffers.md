# Building Blocks
## No Buffer

If we don't have a buffer in an effects pedal, current will be drawn from the source of the signal. That is, from the pickups.

![image](https://github.com/user-attachments/assets/bf691557-5cac-42b1-8891-27ff5efde6b1)


</br></br>
The problem is, the pickups can't produce much current, so they get _loaded down_, and the [tone of the signal suffers](https://github.com/Network-Direction/Audio-Effect-Pedals/blob/Wha-Pedals/audio%20circuit%20blocks/3.%20Buffers/1.%20Signals%20and%20Impedance.md).

The goal of a buffer is to address this issue.


</br></br>
## Adding a Buffer

When we add a buffer, we use a transistor or an opamp that's connected to an external power supply. Often this is a 9v DC power supply for an effects pedal.

The signal itself doesn't change in the buffer. It is not amplified or attenuated. However, if the effects circuit needs to draw more current, it is now at liberty to do so, as this can be provided by the power supply.

![image](https://github.com/user-attachments/assets/561306f5-a7fb-4907-ab53-7678765bf0f5)


</br><br>
As mentioned, a buffer can be based around a transistor (either BJT or JFET), or an opamp. In the following sections, we'll see some examples of how a transistor base buffer works.



</br><br>
# BJT Buffers
## Schematic

Here is a simple example of a _unity gain_ buffer, based on a BJT transistor.

![image](https://github.com/user-attachments/assets/89b058bc-4297-4e7d-8e5d-c4e674ae51ad)


</br></br>
It's called unity gain, as the signal is not amplified in any way. A transistor based amplifier in this configuration is called an _Emitter Follower_. This is because the output is on the **emitter** pin of the transistor. This also known as a **common collector** architecture.

We'll break down the basics of how this works.


</br></br>
## Input Filtering

The input signal comes in through R1 and C1.

**R1** is there to protect the base of the transistor from any current surges. This might happen if there's an electrostatic discharge from the tip of the guitar jack.

**C1** is there to protect the pickups from any stray DC current. As we'll see soon, DC and AC can mix together, and there are times we want to do this deliberately. However, it would be bad to feed a DC signal back to the guitar.

The capacitor is there to filter out any DC, to prevent this from happening. If you're not already aware, capacitors pass AC, but will block DC.

C1 and R1 will also work as a high-pass filter, removing any extremely low frequencies. These will be frequencies that are inaudible.


</br></br>
## Power Supplies

You will notice that there are two power supply voltages listed here; 9v DC and 4.5v DC.

This is common, as we often need to use half the supply voltage, as you will soon see.

In practice, the entire effects pedal will be powered by a 9v battery or external DC power adapter. There will be a power supply circuit that filters the power, as well as creates a 4.5v supply.

The 4.5v supply is usually just created with a simple voltage divider made of two identical resistors.


</br></br>
## Biassing

The input signal is AC. This is a voltage that oscillates around zero volts, like this:

![image](https://github.com/user-attachments/assets/635e4a6d-87f4-4a74-b119-9992190dab60)


</br></br>
The signal from the pickups may peak at 100mV (as an example). That means we will have a voltage range from -100mV to +100mV.

However, our power supply is usually a single 9v battery, which ranges between 0v and 9v. The problem is, this won't help with the signal when it dips below zero volts.

To work around this, we can _bias_ the signal. This means we introduce some DC voltage to give the signal a boost. Instead of having the signal oscillating around zero volts, we can have it oscillate around some other value.

In this example, we're using 4.5v as our bias. If the signal was previously from -100mV to +100mV, it will now be from 4.4v to 4.6v.

![image](https://github.com/user-attachments/assets/bac1aadf-25b3-43d1-a93b-e9de0f71ffe0)


</br></br>
## Voltage Divider

**R2**, the _base bias resistor_ and **R3**, the _emitter resistor_ create a voltage divider. Why do we need this? Why not just connect the base of the transistor directly to 4.5v?

A silicon transistor needs a minimum voltage on the base to turn on. This is somewhere in the 600-700mV range (the pickups alone are not enough to create this, which is another reason we need to add voltage).

However, applying 4.5v directly to the base would be far too much. There would be an excess of voltage on the base, which would result in an excess of current. There is a limit to how much current the transistor can handle, one of R2's jobs is to protect the transistor.

As electricity will travel through the base to the emitter, we can see R2 and R3 as a voltage divider. In this case we have 470K and 10K, which creates 0.7 volts of DC. Exactly what we need for the base pin of the resistor.


</br></br>
## Drawing Current

Let's say that some other part of the effects circuit needs to amplify the signal. It will need to boost the voltage of the signal. For this, it will need to draw a little more current.

Now that there's a 9 volt power supply on the collector of the transistor, there's a new power supply to draw on. The current doesn't need to be pulled from the signal source (the pickups). This acieves the buffer's goal of providing more current while matching the input impedance.

We can even say that the buffer _isolates_ the signal from the rest of the circuit. The part to the left of the transistor is _high impedance_, while the parts to the right are _low impedance_.


</br></br>
## Removing Bias Voltage

The **C2** capacitor is there to remove the DC bias voltage that we introduced earlier. This brings the signal back down to its former state, where it oscilates around zero volts. In this way, the original signal is not affected in any way.


</br></br>
# Impedance

There are some complicated math involved in working out the input impedance of this circuit. A _rough_ way to estimate the input impedance of an emitter follower circuit is to look at the R2 resistor. In this case it is 470K, so the input impedance is also somewhere near 470K (It may be closer to 400K in this case).

To see the math that goes into this, look at the **Tube Screamer Analysis** from _Electrosmash_, linked at the bottom of this page.

Is this a good impedance? It's ok. In the ideal buffer, we want to see an impedance of about 1MÎ© or more.

This circuit comes from the Boss DS1 distortion pedal, which was created in the 70's. More modern pedals usually do have a higher input impedance.


</br></br>
# JFET Buffers



</br></br>
# References
Small Signal Amplifiers - https://www.youtube.com/watch?v=WgOKPF8LkA8

Boss DS1 Analysis - https://electrosmash.com/boss-ds1-analysis#input

Tube Screamer Analysis - https://electrosmash.com/tube-screamer-analysis#impedance

Basic Buffers - https://www.muzique.com/lab/buffers.htm

